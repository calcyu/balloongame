function rand(n,a){return Math.floor(Math.random()*(a-n+1))+n}function randBallValue(){return`--x: ${rand(10,90)}; --h: ${rand(0,360)}; --s: ${rand(15,50)}; --d: ${rand(10,10)}; --delay: ${rand(0,0)};`}function createBall(n){return` <div id="ball_${n.key}" key="${n.key}" class="balloon" style="${randBallValue()}--anima: ${n.anima}">
      <div class="balloon__handle"></div>
      <div class="txt">${n.txt}</div>
    </div> `}function restartBall(n){n.isRunning=!0,n.txt=randTxt(),n.anima="float"===n.anima?"float2":"float",$("#"+n.id).attr("style",randBallValue()+" --anima: "+n.anima),$(`#${n.id}>.txt`).text(n.txt),$("#"+n.id).addClass("balloon-animation")}function stopBall(n){n.isRunning=!1,$("#"+n.id).removeClass("balloon-animation"),stopedBalls.push(n)}function randTxt(){return String.fromCharCode(Math.floor(26*Math.random())+65)}function setScore(n){100<(score+=n)?score=100:score<0&&(score=0),$("#score").attr("style","--score: "+score),100<=score?($("#msgBox span").text("恭喜你，挑战成功！"),$("#msgBox").show(),isPlaying=!1):score<=0&&($("#msgBox span").text("挑战失败，加油！"),$("#msgBox").show(),isPlaying=!1)}let count=0;const num=6;let runningBalls=[],stopedBalls=[],score=1,isPlaying=(setScore(0),!0);setInterval(()=>{var n;isPlaying&&(count<num?(n={id:"ball_"+count,key:count,isRunning:!0,anima:"float",txt:randTxt()},runningBalls[count]=n,$("#box").append(createBall(n)),$("#"+n.id).addClass("balloon-animation"),$("#"+n.id).on("animationend",n=>{stopBall(runningBalls[$(n.target).attr("key")]),console.log("end"),setScore(-1)}),count++):(n=stopedBalls.pop())&&!n.isRunning&&restartBall(n))},1e3/num),$("body").keypress(a=>{for(let n=0;n<runningBalls.length;n++){var t=runningBalls[n];if(t.txt==a.key.toUpperCase()){stopBall(t),setScore(1);break}n==runningBalls.length&&setScore(-1)}});